---
title: "Lab_function_iterator_vector"
date: "`r Sys.Date()`"
author: "Hannah Hardy"
Acknowledgement: "Thanks to Dr. David Gerard"
output: pdf_document
urlcolor: "blue"
params: 
  solutions: FALSE
format: html
editor: visual
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = params$solutions, 
                      eval = params$solutions,
                      fig.height = 3, 
                      fig.width  = 6,
                      fig.align  = "center")
ggplot2::theme_set(ggplot2::theme_bw())

library(tidyverse)
```

# Learning Objectives

-   Practice manipulating vectors.
-   Practice for loops.
-   Practice `purrr`.

# Exercise 1: Simulations

1.  Write a function that uses a for loop that, for each iteration, randomly draws 5 observations from an exponential distribution with rate parameter 1 (use `rexp()`) and calculates its mean. It should do this 10,000 times. Choose an appropriate plot to plot the distribution of means.

```{r}
#function

simulation <- function (n.sim = 10000, n = 5, rate = 1) {
  
  means <- numeric(n.sim)
  
  for (i in 1:n.sim) {
    draws <- rexp(n, rate = rate)
    means[i] <- mean(draws)
  }
  
  return(means)
}

set.seed(1)
means <- simulation()

#plot

hist(means, breaks = 50, col = "lightblue", main = "Distribution of sample means",
     xlab = "Sample Mean")
```


# Exercise 2: Star Trek

For this exercise, load in the following dataset.

```{r, message = FALSE, eval = TRUE, echo = TRUE}
library(tidyverse)
library(lubridate)
```

```{r, echo = TRUE, eval = TRUE}
st <- list(
  franchise = "Star Trek",
  series = c("TOS", "TNG", "DS9", "VOY", "ENT"),
  starship = tribble(~ID,         ~class,         ~name,       ~length,  ~launched,
                     ##----------/---------------/------------/---------/----------
                     "NCC-1701",  "constitution", "Enterprise", 288.646, 2245,
                     "NCC-1701D", "galaxy",       "Enterprise", 642.5,   2361,
                     "NX-74205",  "defiant",      "Defiant",    170,     2370,
                     "NCC-74656", "intrepid",     "Voyager",    343,     2371),
  captain = tribble(~firstname,  ~lastname, ~ship,       ~drink,
                    ##----------/----------/------------/----------
                    "James",     "Kirk",    "NCC-1701",  "brandy",
                    "Jean-luc",  "Picard",  "NCC-1701D", "tea",
                    "Benjamin",  "Sisko",   "NX-74205",  "coffee",
                    "Katherine", "Janeway", "NCC-74656", "coffee"),
  age = as.duration(today() - ymd(19660908))
)
```

## 1. Use an appropriate function to see the components of `st` in a concise way.

```{r}
str(st)
```


## 2. Use R code to determine the class of each element of `st`.

```{r}
sapply(st, class)
```


## 3. It seems that `starship` and `captain` can be merged into one data frame. Do this now.

```         
Your `st` list should now look like this:
```

# Exercise 3: Diamonds

## 1. Load in the `diamonds` data frame from the ggplot2 package.

## 2. Calculate summary statistics (using `summary()`) for all quantitative variables.

## 3. Fit a linear model of `price` on `depth` and extract the $p$-value for the regression coefficient of `depth`

## 4. Plot `depth` vs `price`, faceting by `color`, including an OLS line. Do the $p$-values in the previous question roughly match what you would expect based on the plots?
